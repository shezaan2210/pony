import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import Lenis from 'lenis'
import LocomotiveScroll from 'locomotive-scroll';
gsap.registerPlugin(ScrollTrigger);


const locomotiveScroll = new LocomotiveScroll({
  lenisOptions: {
    wrapper: window,
    content: document.documentElement,
    lerp: 0.1,
    duration: 1.2,
    orientation: 'vertical',
    gestureOrientation: 'vertical',
    smoothWheel: true,
    smoothTouch: false,
    wheelMultiplier: 1,
    touchMultiplier: 2,
    normalizeWheel: true,
    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), 
},
});


// const lenis = new Lenis()

// lenis.on('scroll', (e) => {
//   // console.log(e)
// })

// lenis.on('scroll', ScrollTrigger.update)

// gsap.ticker.add((time)=>{
//   lenis.raf(time * 1000)
// })

// gsap.ticker.lagSmoothing(0)

const specificElement = document.querySelector('.canva>.horizontal>.image');

// Set a multiplier for the scroll delta of the specific element
specificElement.addEventListener('scroll', (event) => {
  // Adjust this multiplier value as needed
  const scrollMultiplier = 2; // Example multiplier value

  // Adjust the scroll speed by multiplying the deltaY of the event
  event.deltaY *= scrollMultiplier;
});


const tl = gsap.timeline();

const svgAnimation = ()=>{
  const shapePaths = document.querySelectorAll(".logo-shape");
  let index = 0;
  
  const pathsData = [
    "M490.652 0L492.769 156.468L436.823 10.1288L418.073 17.99L479.463 161.457L371.955 48.2253L357.288 62.436L469.483 171.888L326.593 107.638L318.731 126.535L463.889 184.587L307.239 179.9L307.088 200.46L463.889 198.949L317.672 254.884L325.384 273.781L469.181 211.647L355.323 319.134L369.838 333.949L479.009 222.23L415.503 364.487L434.101 372.953L492.315 227.219L487.779 383.989L508.343 384.14L506.075 227.37L562.021 374.011L580.922 365.696L519.381 222.532L627.191 335.764L641.556 321.251L529.361 212.101L672.402 276.351L680.113 257.605L535.107 199.402L691.605 203.786L691.756 182.773L535.258 185.192L681.172 129.256L673.763 110.208L529.663 172.342L643.521 64.5524L629.308 50.1907L519.835 161.759L583.493 19.3506L564.743 11.0358L506.529 156.619L511.216 0.151209L490.652 0Z",
  
    "M487.023 0L491.862 174.444L372.409 47.6582L354.567 65.2085L481.277 184.883L307.088 180.042V204.098L481.277 199.257L354.567 318.78L372.409 336.482L491.862 209.847L487.023 384.14H511.821L506.982 209.847L626.435 336.482L644.126 318.78L517.567 199.257L691.756 204.098V179.285L517.567 184.883L644.126 65.2085L626.435 47.6582L506.982 174.444L511.821 0H487.023Z",
  
    "M385.532 225.692C385.079 198.966 389.005 178.733 392.327 158.65C408.937 60.3529 493.043 1.76674 585.453 23.51C616.861 30.9087 622.448 47.5181 601.308 70.9223C576.545 98.5543 570.807 143.249 590.134 176.921C598.892 192.02 613.539 206.365 622.297 221.464C631.206 236.714 627.884 245.17 610.972 250.304C599.345 253.928 582.584 255.74 570.656 258.458C544.231 264.8 532 279.899 528.678 308.286C527.47 318.705 522.789 330.331 519.769 340.297C515.541 354.49 504.519 362.795 489.268 367.325C446.384 379.706 412.863 360.832 400.632 312.665C392.931 282.315 387.042 262.384 385.532 225.541M311.241 144.91C294.178 238.829 330.418 321.272 406.521 360.983C437.928 377.442 471.752 381.82 506.633 380.763C513.578 380.763 520.675 380.914 527.621 380.763C550.724 380.159 564.918 369.59 569.901 346.639C574.28 326.103 586.359 313.722 604.932 306.474C618.975 300.887 633.622 296.357 647.363 290.167C688.434 271.745 700.363 230.977 675.901 192.775C670.616 184.47 664.576 176.166 657.328 169.673C638.605 153.215 635.283 133.132 646.155 112.748C672.73 62.7686 651.893 39.2136 601.308 22.3022C554.952 6.74977 507.388 -0.800122 458.313 5.39066C378.888 15.5073 325.435 65.9396 311.09 144.91",
  
    "M492.742 361.774C492.893 362.529 492.592 361.02 492.742 361.774C489.583 361.774 486.423 361.774 483.114 361.774C403.224 359.51 370.878 295.058 404.428 249.473C412.703 238.304 413.906 220.492 414.96 205.549C416.464 181.096 418.27 160.719 404.278 141.248C386.224 115.889 388.029 84.6443 410.145 62.7577C435.421 37.5503 466.564 29.7013 500.867 39.9654C524.487 47.0596 543.444 68.1916 535.32 91.7386C532.612 99.7385 528.55 107.437 525.841 115.437C517.868 139.738 525.841 154.832 550.365 161.021C560.595 163.587 562.1 164.795 572.481 167.21C586.473 170.53 607.536 176.417 610.094 193.021C612.651 209.021 595.801 218.983 583.313 227.436C571.879 235.134 554.878 269.398 562.702 290.831C573.534 320.265 563.605 344.114 534.417 354.982C521.328 359.812 507.336 360.718 492.592 361.925M474.688 6.45618C445.501 7.36183 426.695 14.0033 403.074 22.3051C339.584 44.9465 312.052 105.323 333.867 169.323C336.124 175.813 338.681 182.304 341.69 188.493C351.169 208.266 351.319 228.19 344.398 249.02C329.053 295.511 342.743 332.944 386.073 355.133C446.253 385.774 509.593 388.189 573.233 367.208C613.253 353.925 626.794 320.265 627.245 281.624C627.546 257.171 635.971 239.511 653.273 222.907C685.168 192.568 675.84 149.097 634.617 134.304C606.031 124.04 590.084 108.493 589.331 75.4368C588.579 43.1352 564.357 25.9277 535.922 17.324C517.416 11.7391 499.513 7.51278 474.688 6.60712",
  
    "M452.393 73.9801C473.523 59.6088 500.885 55.2217 523.079 62.6343C533.72 66.1137 542.993 71.5595 543.145 84.2668C543.297 97.5792 533.872 103.782 522.775 107.564C493.893 117.245 465.162 103.782 452.393 73.9801ZM600.606 116.943C640.586 161.267 631.009 250.218 581.908 292.273C530.376 336.294 446.617 329.789 403.445 278.355C363.009 230.4 363.921 141.601 404.965 108.471C451.633 190.01 567.619 182.748 600.758 117.094M628.424 47.809C622.648 54.919 635.265 48.5654 629.489 55.8266C575.828 4.69501 525.663 -5.44053 453.305 9.98973C366.354 31.9249 307.828 108.925 310.565 197.876C313.301 287.281 375.626 360.347 463.794 377.442C546.489 393.477 631.161 352.783 668.1 279.263C706.559 202.716 689.838 110.135 625.232 52.0447C624.472 51.4396 629.033 47.0526 628.424 47.809Z",
  
    "M497.702 344.264C468.314 343.506 443.622 337.134 417.264 331.218C377.879 322.571 365.458 303.457 365.76 263.561C366.215 215.927 366.063 168.142 365.609 120.509C365.155 82.1296 376.516 63.4706 413.326 54.3687C469.829 40.4125 527.241 40.7159 583.743 54.3687C618.887 62.7121 631.46 82.5847 631.157 118.841C630.854 167.991 630.854 217.141 631.157 266.291C631.46 302.547 619.19 321.813 583.441 330.156C555.719 336.679 526.029 343.961 497.853 344.264M672.209 182.25C670.997 160.709 669.634 148.573 664.029 128.094C641.307 45.1153 573.14 -2.06296 486.34 3.70157C399.995 9.4661 339.251 66.2013 326.375 153.428C320.316 194.235 322.588 234.434 337.433 273.269C367.427 352.001 439.835 391.29 529.967 378.548C607.375 367.626 662.969 306.036 670.997 222.45C671.906 212.135 671.755 202.426 672.361 192.111C672.058 189.683 672.361 187.256 672.361 182.25",
    "M368.127 51.2284C456.557 76.8276 542.863 77.1287 630.534 51.2284C565.312 -15.0282 439.72 -19.0939 368.127 51.2284ZM643.578 324.536C720.329 242.77 703.492 120.195 643.275 64.0275C617.338 150.914 617.338 236.596 643.578 324.536ZM354.475 64.9316C290.315 128.628 283.944 249.246 353.869 322.128C380.564 273.64 383.75 126.821 354.475 64.9316ZM368.431 335.981C434.412 401.937 557.728 406.906 631.293 336.283C543.167 310.081 456.557 310.533 368.431 335.981Z",
  
    "M603.292 150.802C604.497 150.5 601.937 151.104 603.292 150.802C603.443 253.39 528.124 329.688 425.088 331.804C416.049 331.955 413.338 328.329 409.873 320.925C404.3 304.457 399.329 288.895 396.918 272.88C374.925 155.335 453.257 56.6751 570.152 53.8044C579.04 53.6534 583.107 54.711 586.571 64.6827C595.459 91.425 602.84 117.714 603.142 150.953M329.734 192.955C330.788 253.39 350.672 305.968 398.274 344.646C485.945 415.808 616.548 377.885 655.413 268.952C679.967 199.905 671.833 132.521 628.75 72.3882C556.896 -27.7821 412.133 -17.2062 353.987 91.5761C337.115 123.304 329.282 157.147 329.734 192.955Z",
  
    "M353.829 153.732C354.283 90.6148 390.017 49.7477 450.432 43.2393C547.187 32.7955 658.174 150.553 645.001 249.542C637.884 302.972 605.33 335.665 552.94 341.72C456.337 352.92 353.072 255.445 353.829 153.58M313.553 197.474C315.218 303.274 400.768 386.219 506.002 384.1C605.33 382.133 686.489 297.523 685.277 197.323C683.915 82.5928 602.453 0.858701 491.92 3.28045C391.38 5.55084 311.887 92.1283 313.704 197.474",
  
    "M307.088 171.483V208.886C341.261 207.227 374.23 204.965 407.199 204.513C424.211 204.211 441.373 207.378 458.535 208.886C447.846 221.103 437.91 234.375 426.168 245.536C401.93 268.461 376.79 290.179 350.294 314.009C359.025 323.51 366.101 331.051 376.338 342.212C405.242 309.182 432.491 277.51 460.492 246.592C466.213 240.257 475.095 236.788 482.471 231.811C484.278 240.559 487.74 249.306 487.289 257.752C485.181 298.474 482.02 339.045 479.009 381.727C492.558 382.632 501.741 383.084 517.548 384.14C514.989 341.458 511.978 301.189 510.322 260.92C509.87 251.267 513.935 241.615 515.892 231.962C524.021 237.542 533.506 241.916 539.979 249.005C566.776 278.264 592.82 308.428 620.821 340.251C630.456 331.654 638.133 324.867 649.575 314.762C616.305 285.805 584.69 258.808 553.829 230.906C547.506 225.175 544.194 215.975 539.377 208.283C547.958 206.021 556.689 201.496 565.27 201.949C605.917 203.91 646.413 207.077 686.307 209.791C697.598 182.342 691.727 170.88 665.081 173.142C633.918 175.706 602.756 177.516 571.593 179.326C560.754 179.929 549.915 179.326 539.076 179.326C538.022 176.309 536.818 173.293 535.764 170.276C572.346 136.794 609.078 103.161 647.015 68.4725C638.736 58.9708 630.305 49.0167 624.133 41.9281C620.219 46.1511 618.864 47.3577 617.057 49.4692C592.368 76.4661 567.98 103.765 542.839 130.46C535.312 138.453 524.925 143.581 515.892 149.916C513.935 139.207 510.171 128.348 510.623 117.791C512.279 79.3316 515.29 40.8724 517.849 0H479.009C482.17 43.1347 485.482 83.7053 487.59 124.276C488.041 132.722 483.676 141.319 481.568 149.916C474.041 145.089 465.008 141.771 459.288 135.437C431.889 105.273 405.543 74.2037 377.241 41.6264C366.854 51.2789 359.327 58.2167 348.788 68.02C381.005 96.5251 411.866 123.07 441.824 150.519C448.749 156.853 452.664 166.657 457.933 174.801C447.997 176.46 438.061 180.08 428.276 179.627C388.833 177.667 349.391 174.348 307.088 171.483Z",
  
    "M489.297 3.35181L504.028 3.22803L504.691 82.6132L489.96 82.737L489.297 3.35181ZM491.676 300.383L506.406 300.264L507.077 384.032L492.347 384.151L491.676 300.383ZM690.043 183.831L606.78 184.473L606.893 199.248L690.156 198.606L690.043 183.831ZM310.32 186.881L389.589 186.275L389.703 201.05L310.434 201.656L310.32 186.881ZM325.499 114.097L319.871 127.752L394.283 158.607L399.911 144.952L325.499 114.097ZM594.939 241.774L600.57 228.12L676.36 259.562L670.73 273.216L594.939 241.774ZM395.986 227.936L319.948 259.435L325.571 273.092L401.609 241.593L395.986 227.936ZM596.48 144.931L670.788 114.149L676.411 127.806L602.103 158.587L596.48 144.931ZM450.985 289.752L418.787 368.537L432.417 374.141L464.615 295.356L450.985 289.752ZM533.258 88.1333L562.684 16.0576L576.316 21.6571L546.89 93.7329L533.258 88.1333ZM431.565 16.9099L418 22.669L448.313 94.51L461.879 88.7509L431.565 16.9099ZM532.88 295.003L546.446 289.243L579.484 367.542L565.919 373.301L532.88 295.003ZM627.678 55.2685L571.713 111.404L582.129 121.852L638.094 65.7165L627.678 55.2685ZM359.275 324.441L418.33 265.207L428.746 275.655L369.692 334.889L359.275 324.441ZM577.733 265.49L567.211 275.832L626.189 336.2L636.71 325.858L577.733 265.49ZM360.59 64.2399L371.111 53.8983L425.982 110.063L415.461 120.404L360.59 64.2399Z",
  ];

  const changePath = () => {
      
  
  
  
      shapePaths.forEach((path) => {
          tl.set(path, { attr: { d: '' } });
          // shapePaths.style.zIndex = 2
        });
      try {
        shapePaths.forEach((path, i) => {
          tl.to(path,{
              duration: .2,
              stagger: .2,
              attr: { d: pathsData[index]},
              ease: 'power4.inOut',
              
          })
        });
      //   tl.clear()
        index++;
        if (index >= shapePaths.length) {
          index = 0;
        }
      } catch (error) {
        console.error("Error in changePath function:", error);
      }
    };
    
  changePath();
}

const homepage = ()=>{
  tl.to('.loading',{
    top: '-100%',
    display: 'none',
    ease: 'power4.out',
    duration: .8
},'a')

var clutter = " ";
document
  .querySelector(".wrapper>h1")
  .textContent.split("")
  .forEach(function (dets) {
    clutter += `<span>${dets}</span>`;
    document.querySelector(".wrapper>h1").innerHTML = clutter;
  });

tl.to('.nav>.menu',{
    opacity: 1,
    color: '#000'
})
tl.from(`.anim>span`, {
    y: 200,
    opacity: 0,
    stagger: 0.1,
    duration: .8
  },'a');

  gsap.to('.anim',{
    scrollTrigger:{
      trigger: '.home>.wrapper',
      start: 'top 10%',
      end: 'bottom top',
      scrub: true,
      // markers: true
    },
    opacity: 0
  })
}

const menuBar = ()=>{
  document.querySelector('.menu>.open').addEventListener('click', ()=>{

    gsap.to('.menubar',{
      // display: 'block',
      top: '0',
      height: '100vh',
      ease: 'power4.inOut',
      duration: .8
    })
    gsap.to('.menu>.close',{
      opacity: 1,
      y: -20,
      ease: 'power4.out',

    })
    gsap.to('.menu>.open',{
      opacity: 0,
      ease: 'power4.out',
    })
    tl.from('.menubar>.flex>.left',{
      delay: .5,
      stagger: .2,
      // transform: `translateX(5vw)`,
      marginRight: '25vw',
      
    },'l')
    tl.from('.menubar>.flex>.right',{
      delay: .5,
      stagger: .2,
      // transform: `-translateX(0vw)`,
      marginLeft: '25vw'
    },'l')
    // document.querySelector('main').style.overflow = hidden
  })
  
  document.querySelector('.menu>.close').addEventListener('click', ()=>{
    // document.querySelector('.menu>.close').style.opacity = 0
    // document.querySelector('.menu>.open').style.opacity = 1
    gsap.to('.menubar',{
      // display: 'block',
      top: '100vh',
      height: '0vh',
      ease: 'power4.inOut',
      duration: .8
    })
    gsap.to('.menu>.open',{
      opacity: 1,
      // y: 20,
      ease: 'power4.out',
    })
    gsap.to('.menu>.close',{
      opacity: 0,
      duration: .8,
      y: 2,
      ease: 'power4.out',
    })
    tl.to('.menubar>.flex>.left',{
      // delay: .5,
      stagger: .2,
      transform: `translateX(5vw)`,
      marginRight: '0vw'
    },'m')
    tl.to('.menubar>.flex>.right',{
      // delay: .5,
      stagger: .2,
      transform: `-translateX(5vw)`,
      marginLeft: '0vw'
    },'m')
  
  })
}

const marquee = ()=>{
  gsap.to('.marquee>.line-one',{
    scrollTrigger:{
      trigger: '.marquee',
      start: '30% bottom',
      end: 'bottom top',
      scrub: true,
      // markers: true
    },
    transform: `translateX(-30%)`
  })

  gsap.to('.marquee>.line-two',{
    scrollTrigger:{
      trigger: '.marquee',
      start: '10% bottom',
      end: 'bottom top',
      scrub: true,
      // markers: true
    },
    transform: `translateX(0%)`
  })

}

const footer = ()=>{
  gsap.to('footer>.footer-svg',{

    scrollTrigger:{
      trigger: 'footer',
      start: 'top bottom',
      end: 'bottom top',
      scrub: true,
      // markers: true
    },
   rotate: '360deg'

})
}



  svgAnimation()
  homepage()
  menuBar()
  marquee()
  footer()